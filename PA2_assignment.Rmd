---
title: Exploring the U.S. National Oceanic and Atmospheric Administration's (NOAA)
  storm database
author: "Dinesh"
date: "September 18, 2015"
output: html_document
---

### Synopsis

Immediately after the title, there should be a synopsis which describes and summarizes your analysis in at most 10 complete sentences.

### Questions
Your data analysis must address the following questions:
    1.	Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?
	2.	Across the United States, which types of events have the greatest economic consequences?
Consider writing your report as if it were to be read by a government or municipal manager who mightbe responsible for preparing for severe weather events and will need to prioritize resources for different types of events. However, there is no need to make any specific recommendations in your report.

### Data Processing
There should be a section titled Data Processing which describes (in words and code) how the data were loaded into R and processed for analysis. In particular, your analysis must start from the raw CSV file containing the data. You cannot do any preprocessing outside the document. If preprocessing is time-consuming you may consider using the cache = TRUE option for certain code chunks.

### Results

There should be a section titled Results in which your results are presented.
    You may have other sections in your analysis, but Data Processing and Results are required.
    The analysis document must have at least one figure containing a plot.
    Your analyis must have no more than three figures. Figures may have multiple plots in them 
    (i.e. panel plots), but there cannot be more than three figures total.
	You must show all your code for the work in your analysis document. This may make the document
    a bit verbose, but that is okay. In general, you should ensure that echo = TRUE for every code 
    chunk (this is the default setting in knitr).

```{r}
req.pkg <- c("ggplot2","dplyr","lubridate","tidyr","dygraphs")
pkgs.not.installed <- req.pkg[!sapply(req.pkg, function(p) require(p, character.only=T))]
if (length(pkgs.not.installed)>0) install.packages(pkgs.not.installed, dependencies=TRUE)
# load required packages
library(ggplot2)
library(dplyr)
library(tidyr)
library(lubridate)
library(dygraphs)
# document session info for reference 
sessionInfo()

# read storm data into data frame 
FStormData <- read.csv("./data/repdata-data-StormData.csv",nrows=500000)
str(FStormData)

##### Explore   Attempt 1

FSStormDataSummary <- FStormData %>% select (STATE,BGN_DATE,EVTYPE,FATALITIES,INJURIES)

FSStormDataSummary$BGN_DATE <- as.Date(FSStormDataSummary$BGN_DATE,format = "%m/%d/%Y")



FSStormDataSummary <-  FSStormDataSummary %>% 
    select (BGN_DATE,EVTYPE)  %>%
        group_by(BGN_DATE,EVTYPE) %>%
            summarise(n=count(n)

FSStormDataSummary <- FSStormDataSummary %>% spread(EVTYPE, TF)

row.names(FSStormDataSummary) <- FSStormDataSummary$BGN_DATE

FSStormDataSummary$BGN_DATE <- NULL # remove date column

dygraph(FSStormDataSummary)

## =======





##### Explore   Attempt 1  END

##### Explore   Attempt  START
#### data only important from 1995.

FSStormDataSummary <- FStormData %>% select (BGN_DATE,EVTYPE,FATALITIES,INJURIES)

FSStormDataSummary$BGN_DATE <- as.Date(FSStormDataSummary$BGN_DATE,format = "%m/%d/%Y")

FSStormDataSummary$year <- year(FSStormDataSummary$BGN_DATE)

FSStormDataSummary$decade <- paste(substr(FSStormDataSummary$year,1,3),"0's",sep="")


FSStormDataSummary$year <- as.factor(FSStormDataSummary$year)

p <- qplot(year, data=FSStormDataSummary, geom="histogram",binwidth=20)
p

p + facet_grid(EVTYPE~decade)

```

You can also embed plots, for example:

```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
